<!DOCTYPE html>
<html>
<head>
    <title>Cordova</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--<script type="text/javascript" charset="utf-8" src="cordova.js"></script>-->
    <link rel="stylesheet" href="jquery.mobile-1.3.1.min.css">
    <script type="text/javascript" charset="utf-8" src="jquery.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="jquery.mobile-1.3.1.min.js"></script>
	<script type="text/javascript" charset="utf-8" src="underscore.js"></script>
    <script type='text/javascript'>//<![CDATA[
    $( document ).on( "pageinit", "[data-role='page'].demo-page", function(){
        $('#targetLocalJson').click(function() {
            $.getJSON('json/Meal Ready to Eat Ration Menus 2013.json', function(data) {
              var items = [];

              $.each(data, function(key, val) {
                items.push('<li id="' + key + '">' + val + '</li>');
              });

              $("<ul id='list' data-role='listview' data-filter='false' data-inset='true'>", {
                'class': 'my-new-list',
                html: items.join('')
              }).appendTo('#main-content');
            });
        });
        $('#target').click(function() {

                var items = [];

			$.getJSON('json/Meal Ready to Eat Ration Menus 2013.json', function(data) {
              var items = [];

              var entrees = _.where(data, {ITEMTYPE: "Entree"});
			  $.each(entrees, function(key, val) {
                items.push('<li><a href="#?id=' + key + '">' + val.ITEM + '</a> (' + val.CALORIES + ' cal)</li>');
              });
			  
				$('#test_list').append(items.join(''));
				$('#test_list').trigger('create');
				$('#test_list').listview('refresh');
            });
        });
    });//]]>
    </script>
</head>
<body>
<div data-role="page" id="main">
    <div data-role="header" data-position="fixed">
    </div>
    <div id="main-content" data-role="content">
        <input id="target" type="button" value="Get List" />
        <ul id='test_list' data-role='listview' data-filter='false' data-inset='true'>
        </ul>
    </div>

    <div data-role="footer" data-position="fixed">
    </div>
</div>
</body>
</html>